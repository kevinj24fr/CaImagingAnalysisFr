---
title: "Basic Tutorial: Calcium Imaging Analysis Workflow"
author: "Calcium Team"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Basic Tutorial: Calcium Imaging Analysis Workflow}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.width = 8,
  fig.height = 5
)
library(CaImagingAnalysisFr)
```

# Introduction

This tutorial walks you through a typical calcium imaging analysis workflow using `CaImagingAnalysisFr`. You'll learn how to:

- Simulate or load data
- Correct calcium traces
- Infer spikes
- Visualize results
- Perform basic quality control

# 1. Simulate Calcium Imaging Data

```{r simulate}
# Simulate synthetic calcium imaging data (5 cells, 500 time points)
raw_data <- generate_synthetic_data(n_cells = 5, n_time = 500)
str(raw_data)
```

# 2. Correct Calcium Traces

```{r correction}
# Apply baseline correction and normalization
corrected <- calcium_correction(raw_data, method = "modern", span = 0.45)
str(corrected)
```

# 3. Spike Inference

```{r spike-inference}
# Infer spikes for the first cell
trace <- corrected$Cell_1
spikes <- infer_spikes(trace, method = "oasis")
head(spikes)
```

# 4. Visualization

```{r visualization}
# Plot the corrected trace and inferred spikes
plot_cell_trace(corrected, cell = "Cell_1", show_spikes = TRUE)
```

# 5. Basic Quality Control

```{r qc}
# Assess correction quality
quality <- calculate_correction_quality(raw_data, corrected)
print(quality)

# Validate spike detection
validation <- validate_spike_detection(trace, spikes$spike, method = "oasis")
print(validation)
```

# Conclusion

You have completed a basic calcium imaging analysis workflow! Explore the package documentation and advanced vignettes for more powerful features, including deep learning, network analysis, and Bayesian modeling. 